{% extends "layout.html" %}
{% block content %}
<h2 class="mb-3"><i class="fas fa-user-shield"></i> ê´€ë¦¬ì í˜ì´ì§€</h2>

<!-- 1) ì…ê¸ˆ í™•ì¸ -->
<h4>âœ… ì…ê¸ˆ í™•ì¸ í•„ìš”</h4>
<div class="row g-3">
  {% for o in pending_orders %}
  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">ì£¼ë¬¸ {{ o.id }}</h5>
        <p class="card-text">
          í…Œì´ë¸”: {{ o.tableNumber }}<br>
          ì´ì•¡: {{ o.totalPrice }}ì›
        </p>
        <button
          class="btn btn-success w-100"
          hx-post="{{ url_for('admin_confirm',order_id=o.id) }}"
          hx-swap="outerHTML"
          hx-target=".card"
        >
          <i class="fas fa-check"></i> í™•ì •
        </button>
      </div>
    </div>
  </div>
  {% endfor %}
  {% if not pending_orders %}
    <p class="text-muted">ëŒ€ê¸°ì¤‘ì¸ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endif %}
</div>

<!-- 2) ì¡°ë¦¬ ì¤‘ -->
<h4 class="mt-4">ğŸ‘©â€ğŸ³ ì¡°ë¦¬ ì¤‘</h4>
<ul class="list-group">
  {% for o in paid_orders %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
      <strong>{{ o.id }}</strong> / í…Œì´ë¸” {{ o.tableNumber }}
      {% if o.kitchenDone %}
        <span class="badge bg-success">ì™„ë£Œ</span>
      {% else %}
        <span class="badge bg-warning text-dark">ì§„í–‰ì¤‘</span>
      {% endif %}
    </div>
    <form method="POST" action="{{ url_for('admin_complete',order_id=o.id) }}">
      <button class="btn btn-outline-primary btn-sm">
        <i class="fas fa-clipboard-check"></i> ìµœì¢… ì™„ë£Œ
      </button>
    </form>
  </li>
  {% endfor %}
  {% if not paid_orders %}
    <li class="list-group-item text-muted">í™•ì •ëœ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</li>
  {% endif %}
</ul>

<!-- 3) ê³¼ê±° ì£¼ë¬¸ -->
<h4 class="mt-4">ğŸ“œ ì™„ë£Œëœ ì£¼ë¬¸</h4>
<ul class="list-group">
  {% for o in completed_orders %}
  <li class="list-group-item">
    {{ o.id }} / í…Œì´ë¸” {{ o.tableNumber }} / {{ o.totalPrice }}ì› (ì™„ë£Œë¨)
  </li>
  {% endfor %}
  {% if not completed_orders %}
    <li class="list-group-item text-muted">ì™„ë£Œëœ ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</li>
  {% endif %}
</ul>

<hr class="my-4">

<!-- í’ˆì ˆ í† ê¸€ -->
<h4>ğŸ½ï¸ ë©”ë‰´ í’ˆì ˆ ê´€ë¦¬</h4>
<table class="table table-striped">
  <thead><tr>
    <th>ë©”ë‰´</th><th>ê°€ê²©</th><th>ìƒíƒœ</th><th>ë™ì‘</th>
  </tr></thead>
  <tbody>
    {% for m in menu_items %}
    <tr>
      <td>{{ m.name }}</td>
      <td>{{ m.price }}ì›</td>
      <td>
        {% if m.soldOut %}
          <span class="text-danger">í’ˆì ˆ</span>
        {% else %}
          <span class="text-success">ì¬ê³  ìˆìŒ</span>
        {% endif %}
      </td>
      <td>
        <form method="POST" action="{{ url_for('admin_soldout',menu_id=m.id) }}">
          <button class="btn btn-outline-{{ 'danger' if not m.soldOut else 'success' }} btn-sm">
            {{ 'í’ˆì ˆ ì²˜ë¦¬' if not m.soldOut else 'í•´ì œ' }}
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
