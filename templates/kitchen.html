{% extends "layout.html" %}
{% block content %}
<h2 class="mb-3"><i class="fas fa-hat-chef"></i> 주방용 페이지</h2>

<h4>✅ 확정된 주문</h4>
<ol class="list-group list-group-numbered mb-4">
  {% for o in paid_orders %}
  <li class="list-group-item">
    <strong>{{ o.id }}</strong> / 테이블 {{ o.tableNumber }}
    {% if o.kitchenDone %}
      <span class="badge bg-success">전체 완료</span>
    {% endif %}
    <ul class="mt-2">
      {% for i in o.items %}
      <li class="d-flex justify-content-between">
        메뉴 {{ i.menuId }} — 남음: {{ i.quantity - i.doneQuantity }}
        {% if i.doneQuantity < i.quantity %}
        <form method="POST"
              action="{{ url_for('kitchen_done_item',order_id=o.id,menu_id=i.menuId) }}">
          <button class="btn btn-outline-secondary btn-sm">
            <i class="fas fa-plus"></i> 조리 완료
          </button>
        </form>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </li>
  {% endfor %}
</ol>

<h4>🍳 전체 조리 대기 현황</h4>
<ul class="list-group">
  {% for ks in kitchen_status %}
    <li class="list-group-item">
      {{ ks.menuName }}: {{ ks.count }}개
    </li>
  {% endfor %}
  {% if not kitchen_status %}
    <li class="list-group-item text-muted">준비할 메뉴가 없습니다.</li>
  {% endif %}
</ul>
{% endblock %}

